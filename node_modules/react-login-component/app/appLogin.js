import React from 'react';
import PropTypes from 'prop-types';
import { connect } from 'react-redux';
import { withRouter } from 'react-router-dom';
import { login } from './actions/loginActions.js';
import Login from './component/login/login.js';

class AppLogin extends React.Component {
	_tryLogin = (username, password) => {
		this.props.dispatch(login());
	}

	_onLogin = () => {
		this.props.history.replace(this.props.redirectUrl);
	}

	render() {
		return (
			<Login
				backgroundImageUrl="https://i.pinimg.com/originals/1e/92/d2/1e92d2809d44371f04cbc4d3d6ce22c1.jpg"
				containerPosition="0.67"
				onLogin={this._onLogin}
				tryLogin={this._tryLogin}
				loggedIn={this.props.loggedIn}
			/>
		);
	}
}

function mapStateToProps(state, ownProps) {
  return {
    loggedIn: state.login.loggedIn,
    redirectUrl: state.login.redirectUrl,
  }
}

export default withRouter(connect(mapStateToProps)(AppLogin));